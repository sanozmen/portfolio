<!DOCTYPE html>
<html>
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-57534785-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-57534785-2');
    </script>
    
        <meta charset='utf-8' />
    <title>A Map of Potentially Affected Areas from Asbestos Release in Ankara-2017</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-57534785-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-57534785-2');
    </script>

    <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
  integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
  crossorigin=""/>

    <link rel="stylesheet" href="assets/css/leaflet-sidebar.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.66.1/dist/L.Control.Locate.min.css" />
    <link rel="stylesheet" href="assets/css/L.Control.MousePosition.css" />
    <!-- bootstrap css-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />

    <link rel="stylesheet" href="https://ppete2.github.io/Leaflet.PolylineMeasure/Leaflet.PolylineMeasure.css" />

    <style>
        body {
            padding: 0;
            margin: 0;
        }

        html, body, #map {
            height: 100%;
            font: 10pt "Helvetica Neue", Arial, Helvetica, sans-serif;
        }

        .lorem {
            font-style: italic;
            color: #AAA;
        }

         .leaflet-control-layers-group-name {
            font-weight: bold;
            margin-bottom: .2em;
            display: block;
    }
    .info {
    padding: 6px 8px;
    font: 14px/16px Arial, Helvetica, sans-serif;
    background: white;
    background: rgba(255,255,255,0.8);
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    border-radius: 5px;
}
.info h4 {
    margin: 0 0 5px;
    color: #777;
}
.legend {
    line-height: 18px;
    color: #555;
}
.legend i {
    width: 18px;
    height: 18px;
    float: left;
    margin-right: 8px;
    opacity: 0.7;
}
    </style>
</head>
<body>
    <div id="sidebar" class="leaflet-sidebar collapsed">
        <!-- Nav tabs -->
        <div class="leaflet-sidebar-tabs">
            <ul role="tablist">
                <li><a href="#home" role="tab"><i class="fa fa-bars"></i></a></li>
                <li><a href="index.html" role="tab"><img src="images/logo.svg" alt="" />></i></a></li>
                <!-- <li class="disabled"><a href="#messages" role="tab"><i class="fa fa-envelope"></i></a></li> -->
            </ul>
             <ul role="tablist">
                <li><a href="https://github.com/sanozmen/" role="tab" target="_blank"><i class="fa fa-github fa-lg"></i></a></li>
            </ul>
            <!--<ul role="tablist">
                <li><a href="#settings" role="tab"><i class="fa fa-gear"></i></a></li>
            </ul> -->
        </div>

        <!-- Tab panes -->
        <div class="leaflet-sidebar-content">
            <div class="leaflet-sidebar-pane" id="home">
                <h1 class="leaflet-sidebar-header">
                   <!-- in case of necessity write a title here such as "Minimize the bar" -->
                   <p style="font-size: 15px">Minimize the Bar</p>
                    <span class="leaflet-sidebar-close"><i class="fa fa-caret-right"></i></span>
                </h1>



                <p class="lorem" style="margin-top:20px">Click logo on the right to get back to the home page.</p>

                <h4>A Choropleth Map Example</h4>

                <p style="margin-top:30px; font-family:'Ubuntu', sans-serif; line-height: 20px" align=justify >This thematic map has been put together with help of leaflet.js library, by using input data extracted from the web site of Turkey's regulatory authority for elections. The script written in python to scrape the data quickly, can be found in my <a href="https://github.com/sanozmen/webAutomation/blob/master/ElectionResult.py" target="_blank">github repository</a> Following the dowload data has been joined with spatial data and prepared for map display by using desktop QGIS software. </p>


                <p style="margin-top:30px; font-family:'Ubuntu', sans-serif; line-height: 20px" align=justify ><i>Only the results for greater municipalities (30 cities in total) has been visualized on this map.</i></p>

              

                <!--<p style="margin-top:120px;  font-family:'Ubuntu', sans-serif; line-height: 5px; font-size: 0.75em" align=justify ><i> References</i></p>

                 <p style="margin-top:5px;  font-family:'Ubuntu', sans-serif; line-height: 20px; font-size: 0.75em" align=justify ><i> Truck icon made by <a href="https://www.freepik.com/" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/"              title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/"              title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></i></p> -->




                <!-- just added this button as a reminder for using this bar as button container in future works-->
                <!-- <button type="button" class="btn btn-primary">Primary</button> -->

            </div>

            <div class="leaflet-sidebar-pane" id="profile">
                <h1 class="leaflet-sidebar-header">Profile<span class="leaflet-sidebar-close"><i class="fa fa-caret-right"></i></span></h1>
            </div>

            <div class="leaflet-sidebar-pane" id="messages">
                <h1 class="leaflet-sidebar-header">Messages<span class="leaflet-sidebar-close"><i class="fa fa-caret-right"></i></span></h1>
            </div>

            <div class="leaflet-sidebar-pane" id="settings">
                <h1 class="leaflet-sidebar-header">Settings<span class="leaflet-sidebar-close"><i class="fa fa-caret-right"></i></span></h1>
            </div>
        </div>
    </div>

    <div id="map"></div>


    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
    integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
    crossorigin=""></script>
    <script src="assets/js/leaflet-sidebar.js"></script>
    <script src="assets/js/L.Control.MousePosition.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.66.1/dist/L.Control.Locate.min.js" charset="utf-8"></script>
    <!-- below is for bootstrap -->
    <script  src="https://code.jquery.com/jquery-3.3.1.js"
    integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
    crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    <script src="https://ppete2.github.io/Leaflet.PolylineMeasure/Leaflet.PolylineMeasure.js"></script>
    <!--for reading geojson via ajax-->
    <script src="assets/js/leaflet-ajax.js" ></script>

    <!-- for titling the layer groups-->
    <script src="https://rawgithub.com/ismyrnow/Leaflet.groupedlayercontrol/master/src/leaflet.groupedlayercontrol.js"></script>
    <!-- animated marker-->
    <script src="assets/js/MovingMarker.js" ></script>
    <script src="assets/js/election2014turkey.geojson" ></script>

    <script>
  

        //basemaps defined below

        var grayscale=L.tileLayer('https://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png', {
          attribution: 'Map data &copy; OpenStreetMap contributors'
        });

        var osm=L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: 'Map data &copy; OpenStreetMap contributors'
        });

        var Esri_WorldImagery = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
  attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
});

          //initiating the map variable
        var map = L.map('map', {
          zoom: 6,
          center: [39.95702,36.98872],
          layers: [grayscale]

        });

        map.setMaxBounds(map.getBounds());
        map.setMinZoom(6);
        map.setMaxZoom(7);

  // control that shows state info on hover
  var info = L.control();

  info.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'info');
    this.update();
    return this._div;
  };

  info.update = function (props) {
    this._div.innerHTML = "<h4>2014 Municipal Election Results</h4>" +(props ? "<b>City: </b>"+
      '<b>' + props.NAME + '</b><br />' + "<b>Winner Party: "+props.greaterMunicipalities2014data_Winner
      : 'Hover over a city'
      );
  };

  info.addTo(map);

function highlightFeature(e) {
    var layer = e.target;

    layer.setStyle({
      weight: 5,
      color: '#666',
      dashArray: '',
      fillOpacity: 0.7
    });

    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
      layer.bringToFront();
    }
    info.update(layer.feature.properties);
  }

var election2014;

  function resetHighlight(e) {
    election2014.resetStyle(e.target);
    info.update();
  }

    function onEachFeature(feature, layer) {
    layer.on({
      mouseover: highlightFeature, 
      mouseout: resetHighlight,
        
    });
  }

        //elections data
 election2014= L.geoJson(turkey2014election, {
    style: CustomStyle,
    onEachFeature: onEachFeature

  }).addTo(map);

   
// Set up a custom style for different political parties
function CustomStyle(feature) {
  var colorToUse;
  var parti = feature.properties.greaterMunicipalities2014data_Winner;
            
  parti === "AKP" ? colorToUse = "#fc8d62":
 parti === "CHP" ? colorToUse = "#8da0cb":
  parti === "MHP" ? colorToUse = "#ffd92f":
  parti === "DBP" ? colorToUse = "#e78ac3":
  parti=== "Independent Candidate" ? colorToUse = "#a6d854":
      colorToUse = "#fff";
            
  return {
    fillColor: colorToUse,
    weight: 1, 
    opacity: 1,
    color: 'white',
    dashArray: '3',
    fillOpacity: 0.7
  };
}

//legend
  var legend = L.control({position: 'bottomleft'});

legend.onAdd = function (map) {

    var div = L.DomUtil.create('div', 'info legend');
        
  div.innerHTML += "<h4>Winners</h4>";
  div.innerHTML += '<i style="background: #fc8d62"></i><span>AKP</span><br>';
  div.innerHTML += '<i style="background: #8da0cb"></i><span>CHP</span><br>';
  div.innerHTML += '<i style="background: #ffd92f"></i><span>MHP</span><br>';
  div.innerHTML += '<i style="background: #e78ac3"></i><span>DBP</span><br>';
  div.innerHTML += '<i style="background: #a6d854"></i><span>Independent Candidate</span><br>';
  div.innerHTML += '<i style="background: #fff"></i><span>N/A</span><br>';

   

    return div;
};

legend.addTo(map);
      

        //initiating the side bar
        var sidebar = L.control.sidebar({ container: 'sidebar', position: 'right' })
            .addTo(map)
            .open("home");

  
     

    </script>
</body>
</html>
